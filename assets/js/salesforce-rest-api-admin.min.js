function salesforce_date_fields(){0===$(".pull_trigger_field > *").length&&$(".pull_trigger_field").hide(),$("#salesforce_object").on("change",function(){var a={action:"get_salesforce_object_description",type:"datetime",salesforce_object:this.value};$.post(ajaxurl,a,function(a){var b="";b+='<label for="pull_trigger_field">Date field to trigger pull:</label>',b+='<select name="pull_trigger_field" id="pull_trigger_field">',$.each(a.data,function(a,c){b+='<option value="'+c.label+'">'+c.label+"</option>"}),b+="</select>",b+='<p class="description">These are date fields that can cause WordPress to pull an update from Salesforce, according to the <code>salesforce_pull</code> class.</p>',$(".pull_trigger_field").html(b),$(".pull_trigger_field").show()})})}function add_field_mapping_row(){$("#add-field-mapping").click(function(){$(this).text("Add another field mapping");var a=$("#salesforce_object").val(),b=$("#wordpress_object").val();if(""!==b&&""!==a){var c=$("table.fields tbody tr").length;fieldmap_fields(b,a,c),$(this).parent().find(".missing-object").remove()}else $(this).parent().append('<span class="missing-object">You have to pick a WordPress object and a Salesforce object to add field mapping.');return!1})}function fieldmap_fields(a,b,c){var d={action:"get_wp_sf_object_fields",wordpress_object:a,salesforce_object:b};$.post(ajaxurl,d,function(a){var b="";b+='<select name="wordpress_field['+c+']" id="wordpress_field-'+c+'">',b+='<option value="">- Select WordPress field -</option>',$.each(a.data.wordpress,function(a,c){b+='<option value="'+c.key+'">'+c.key+"</option>"}),b+="</select>";var d="";d+='<select name="salesforce_field['+c+']" id="salesforce_field-'+c+'">',d+='<option value="">- Select Salesforce field -</option>',$.each(a.data.salesforce,function(a,b){d+='<option value="'+b.label+'">'+b.label+"</option>"}),d+="</select>";var e='<tr><td class="column-wordpress_field">'+b+'</td><td class="column-salesforce_field">'+d+'</td><td class="column-is_key"><input type="checkbox" name="is_key['+c+']" id="is_key-'+c+'" value="1" /></td><td class="column-direction"><div class="radios"><label><input type="radio" value="sf_wp" name="direction[0]" id="direction-'+c+'-sf-wp">  Salesforce to WordPress</label><label><input type="radio" value="wp_sf" name="direction[0]" id="direction-'+c+'-wp-sf">  WordPress to Salesforce</label><label><input type="radio" value="sf_wp" name="direction'+c+'" id="direction-'+c+'-sync">  Sync</label></div></td><td class="column-is_delete"><input type="checkbox" name="is_delete['+c+']" id="is_delete-'+c+'" value="1" /></td></tr>';$("table.fields tbody").append(e)})}var $=window.jQuery;$(document).ready(function(){$("#wordpress_object, #salesforce_object").on("change",function(){$("table.fields tbody tr").remove()}),$(document).ajaxStart(function(){$(".spinner").addClass("is-active")}).ajaxStop(function(){$(".spinner").removeClass("is-active")}),salesforce_date_fields(),add_field_mapping_row()});